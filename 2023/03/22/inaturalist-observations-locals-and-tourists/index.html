<!DOCTYPE html>
<html><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="in progress. blog of Logan Williams/subject.space.">
    
    <link rel="shortcut icon" href="http://localhost:1313/favicon.ico">
    
    <link rel="stylesheet" href="/css/style.min.css">

    <meta property="og:url" content="http://localhost:1313/2023/03/22/inaturalist-observations-locals-and-tourists/">
  <meta property="og:site_name" content="tracks and traces">
  <meta property="og:title" content="iNaturalist observations: &#34;locals&#34; and &#34;tourists&#34;">
  <meta property="og:description" content="In 2010, cartographer Erica Fischer made some simple and spectacular maps of images added to Flickr. She classified photos as either from “locals” or “tourists”, based on how far their profile location was from the photo’s geotag. These maps revealed fascinating psychogeographic patterns of urban exploration and photographic worthiness.
Last summer, Dario Taraborelli suggested extending this to iNaturalist observations.
Remember the classic &#34;Locals &amp; Tourists&#34; dataviz project by @enf? Has anyone tried applying the same method (&lt;30 days posting photos from a given location: you&#39;re a &#34;tourist&#34;; &gt;=30 days: you&#39;re &#34;local&#34;) to @Team_eBird / @inaturalist data to measure local community participation?">
  <meta property="og:locale" content="en-US">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-03-22T00:00:00+00:00">
    <meta property="article:modified_time" content="2023-03-22T00:00:00+00:00">
    <meta property="og:image" content="http://localhost:1313/2023/03/22/inaturalist-observations-locals-and-tourists/assets/sf_hu7fba9da1679ce4a56c592454604cb9c1_692694_1800x1800_fit_q75_box.jpg">

    <meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://localhost:1313/2023/03/22/inaturalist-observations-locals-and-tourists/assets/sf_hu7fba9da1679ce4a56c592454604cb9c1_692694_1800x1800_fit_q75_box.jpg"><meta name="twitter:title" content="iNaturalist observations: &#34;locals&#34; and &#34;tourists&#34;">
<meta name="twitter:description" content="In 2010, cartographer Erica Fischer made some simple and spectacular maps of images added to Flickr. She classified photos as either from &ldquo;locals&rdquo; or &ldquo;tourists&rdquo;, based on how far their profile location was from the photo&rsquo;s geotag. These maps revealed fascinating psychogeographic patterns of urban exploration and photographic worthiness.
Last summer, Dario Taraborelli suggested extending this to iNaturalist observations.
Remember the classic &quot;Locals &amp; Tourists&quot; dataviz project by @enf? Has anyone tried applying the same method (&lt;30 days posting photos from a given location: you&#39;re a &quot;tourist&quot;; &gt;=30 days: you&#39;re &quot;local&quot;) to @Team_eBird / @inaturalist data to measure local community participation?">


    <link rel="stylesheet" href="/css/override.css" />
    <title>iNaturalist observations: &#34;locals&#34; and &#34;tourists&#34;</title>
    <script defer data-domain="exclav.es" src="https://plausible.io/js/script.js"></script>
</head>
<body><header id="banner">
    <h2><a href="http://localhost:1313/">tracks and traces</a></h2>
    <nav>
            <a href="http://subject.space">← back to portfolio</a>
    </nav>
</header>
<main id="content">
<article>
    <header id="post-header">
        <h1>iNaturalist observations: &#34;locals&#34; and &#34;tourists&#34;</h1>
        <div>
                <time>Updated March 22, 2023</time>
            </div>
    </header><p>In 2010, cartographer <a href="https://twitter.com/enf/" target="_blank">Erica Fischer</a> made some simple and spectacular <a href="https://www.flickr.com/photos/walkingsf/albums/72157624209158632/" target="_blank">maps of images added to Flickr</a>. She classified photos as either from &ldquo;locals&rdquo; or &ldquo;tourists&rdquo;, based on how far their profile location was from the photo&rsquo;s geotag. These maps revealed fascinating psychogeographic patterns of urban exploration and photographic worthiness.</p>
<p>Last summer, Dario Taraborelli suggested extending this to iNaturalist observations.</p>
<div style="display: flex; justify-content: center">
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Remember the classic &quot;Locals &amp; Tourists&quot; dataviz project by <a href="https://twitter.com/enf?ref_src=twsrc%5Etfw">@enf</a>? Has anyone tried applying the same method (&lt;30 days posting photos from a given location: you&#39;re a &quot;tourist&quot;; &gt;=30 days: you&#39;re &quot;local&quot;) to <a href="https://twitter.com/Team_eBird?ref_src=twsrc%5Etfw">@Team_eBird</a> / <a href="https://twitter.com/inaturalist?ref_src=twsrc%5Etfw">@inaturalist</a> data to measure local community participation? <a href="https://t.co/1QdSZKB2RH">pic.twitter.com/1QdSZKB2RH</a></p>&mdash; Dario Taraborelli (@ReaderMeter) <a href="https://twitter.com/ReaderMeter/status/1536038627213398016?ref_src=twsrc%5Etfw">June 12, 2022</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


</div>
<p>It&rsquo;s taken a while, but here it is:</p>
<figure>
<iframe src="https://subject.space/projects-static/inaturalist/" width="100%" height="700px"></iframe>
</figure>
<a href="https://subject.space/projects-static/inaturalist" target="_blank">
<h3 style="text-align: center; margin-top: -0.5em; margin-bottom: 0em; border: 1px solid black; border-radius: 2px; padding: 8px; display: inline-block;">⛶ View in a new tab</h2></a>
<h2 id="observations-and-thoughts">Observations and thoughts</h2>
<h3 id="san-francisco">San Francisco</h3>
<p>It&rsquo;s nice to look at places that you know well to get bearings for how the map represents data. Here&rsquo;s San Francisco and Marin:</p>
<div style="width: 80%; margin-left: auto; margin-right: auto;">



<figure>
    <a href="http://localhost:1313/2023/03/22/inaturalist-observations-locals-and-tourists/assets/sf.jpg">
	    <img src="/2023/03/22/inaturalist-observations-locals-and-tourists/assets/sf_hu7fba9da1679ce4a56c592454604cb9c1_692694_1800x1800_fit_q75_box.jpg" alt="A map of San Francisco highlighting observations by &#39;tourists&#39; and &#39;locals&#39;" />
    </a>
    
</figure>
</div>
<p>Expectedly, we see that the Embarcadero and Fisherman&rsquo;s Wharf are bright orange, indicating many observations from &ldquo;tourists&rdquo;. Muir Woods also stands out as a visitor hotspot, and in contrast the surrounding trails around Mt. Tamalpais contain primarily local observations.</p>
<p>Where are people finding access to nature within urban centers? Clearly in San Francisco, the Embarcadero (and Alcatraz) are places where visitors notice and interact with urban wildlife. What are these locations in your city? Are there opportunities to enhance the natural aspects of these destinations, or to make urban ecosystems more legible to visitors?</p>
<h3 id="how-it-works">How it works</h3>
<p>Each dot on the map is an observation on iNaturalist (or, if you are zoomed out, a cluster of observations.) If a user has more than 3 months of observation history in the local area (difference between the earliest and latest observation), that point is tagged as &ldquo;local&rdquo;. Otherwise, it is tagged as &ldquo;tourist&rdquo;. Users with very little observation history are rendered in gray, since it is not possible to tell.</p>
<p>Of course, this methodology has some substantial limitations. The &ldquo;tourist&rdquo; and &ldquo;local&rdquo; labels are not really accurate, just memorable monikers for the two groups (and an allusion to Erica Fischer&rsquo;s earlier maps, mentioned above.) Notably, it is not possible to know if a user is really local to an area or has just visited it multiple times, as on an annual holiday. Similarly, a user&rsquo;s observations might be classified as &ldquo;tourist&rdquo; in their hometown if they have only used iNaturalist previously while traveling.</p>
<h3 id="holiday-destinations">Holiday destinations</h3>
<p>Still, there are compelling patterns. Low population density areas that are popular vacation destinations, like the American Southwest and the Alps, clearly have more &ldquo;tourist&rdquo; observations.</p>
<div class="multi">



<figure>
    <a href="http://localhost:1313/2023/03/22/inaturalist-observations-locals-and-tourists/assets/ut.jpg">
	    <img src="/2023/03/22/inaturalist-observations-locals-and-tourists/assets/ut_huc952809da8745830bd1d16dd1ae50409_707937_1800x1800_fit_q75_box.jpg" alt="A map of the American southwest, including national parks, showing a high percentage of &#39;tourist&#39; observations" />
    </a>
    
</figure>



<figure>
    <a href="http://localhost:1313/2023/03/22/inaturalist-observations-locals-and-tourists/assets/alps.jpg">
	    <img src="/2023/03/22/inaturalist-observations-locals-and-tourists/assets/alps_hu7fba9da1679ce4a56c592454604cb9c1_1049810_1800x1800_fit_q75_box.jpg" alt="A map of the Alps, including national parks, showing a high percentage of &#39;tourist&#39; observations" />
    </a>
    
</figure>
</div>
<h3 id="central-america">Central America</h3>
<p>Another geographic region that stands out globally is Central America, especially Costa Rica. The majority of iNaturalist observations in Costa Rica are by users that do not have extensive history in the region.</p>
<div style="width: 80%; margin-left: auto; margin-right: auto;">



<figure>
    <a href="http://localhost:1313/2023/03/22/inaturalist-observations-locals-and-tourists/assets/centralamerica.jpg">
	    <img src="/2023/03/22/inaturalist-observations-locals-and-tourists/assets/centralamerica_hu7fba9da1679ce4a56c592454604cb9c1_327674_1800x1800_fit_q75_box.jpg" alt="A map of Central America highlighting observations by &#39;tourists&#39; and &#39;locals&#39;. Costa Rica has many tourist observations." />
    </a>
    
</figure>
</div>
<p>This is unsurprising given Costa Rica&rsquo;s popularity for tourism and iNaturalist&rsquo;s userbase, which still tilts towards the Global North.</p>
<p>This could indicate that despite the large number of observations in the region, the local iNaturalist community has room to grow, reach more local residents, and become more robust.</p>
<h2 id="technical-details">Technical details</h2>
<p>I downloaded iNaturalist observations in <a href="https://www.gbif.org/dataset/50c9509d-22c7-4a22-a47d-8c48425ef4a7" target="_blank">bulk from GBIF</a>, which means that this only includes &ldquo;research-grade&rdquo; observations. <s>The data is from November 2022, but I am working on updating it with a more recent extract.</s> <strong>Update: As of March 23rd, the data is current to mid-March.</strong></p>
<p>I initially tried to calculate the number of observations by the same user within a radius of each of their observations. However, even with a Postgres/PostGIS query that seemed to be taking advantage of every indexing opportunity it had, this would take months.</p>
<div style="width: 80%; margin-left: auto; margin-right: auto;">
<pre tabindex="0"><code>SELECT * FROM observations
CROSS JOIN LATERAL (
    SELECT COUNT(*) AS n, MIN(&#34;eventDate&#34;) AS first, MAX(&#34;eventDate&#34;) AS last
    FROM observations o
    WHERE o.&#34;inaturalistLogin&#34; = observations.&#34;inaturalistLogin&#34;
    AND ST_DWithin(o.geom_merc, observations.geom_merc, 25000)
) near
LEFT JOIN posts_by_user
ON posts_by_user.username = observations.&#34;inaturalistLogin&#34;
</code></pre></div>
<p>Though <code>CROSS JOIN LATERAL</code> was pretty cool, I needed a different approach and used <a href="https://wolf-h3-viewer.glitch.me/" target="_blank">H3 tiles</a> at size 3. I was a little worried that this would result in some visible boundary effects, but it seems to be a good approximation.</p>
<p>It took some work with <code>tippecanoe</code> in order to tile the data in a way that looked nice at low zooms. Clustering points worked well once I tuned the parameters.</p>
<p>To serve the data for webmaps, <a href="https://bdon.org/" target="_blank">Brandon Liu&rsquo;s</a> <a href="https://github.com/protomaps/PMTiles" target="_blank">PMTiles</a>. It&rsquo;s really amazing work, and HTTP Range Requests are magical. Mapbox would have charged me somewhere between $120 and $3750 per month for tileset hosting, but instead, I have put a single file in an S3 bucket and PMTiles requests what it needs.</p>



<figure>
    <a href="http://localhost:1313/2023/03/22/inaturalist-observations-locals-and-tourists/assets/ca.jpg">
	    <img src="/2023/03/22/inaturalist-observations-locals-and-tourists/assets/ca_huc952809da8745830bd1d16dd1ae50409_797473_1800x1800_fit_q75_box.jpg" alt="A map of iNaturalist observations in California highlighting observations by &#39;tourists&#39; and &#39;locals&#39;" />
    </a>
    
</figure>
</article>

        </main><footer id="footer">
    Logan Williams
</footer>

<script type="text/javascript" src="/js/lightbox.js"></script>
<link rel="stylesheet" href="/css/lightbox.css">
<script type="text/javascript" src="/js/accordion.js"></script>
<script type="text/javascript">
    var els = document.getElementsByTagName("img");
    for (var i = 0; i < els.length; i++) {
        var el = els[i];
        el.style.transform = "rotate(" + ((Math.random()-0.5)*2) +  "deg)";
    }

    var els = document.getElementsByClassName("inaturalist");
    for (var i = 0; i < els.length; i++) {
        var el = els[i];
        el.style.transform = "rotate(" + ((Math.random()-0.5)*1.5) +  "deg)";
    }
</script></body>
</html>
